# バーティカルスライス — 制作仕様書

**プロジェクト:** Operator: Night Signal
**スライス:** 第1夜 — 「午前2時の歩道橋」
**ステータス:** 仕様書完成
**最終更新:** 2026-01-07

---

## このドキュメントについて

**プレイ可能、ピッチ対応、配信対応**のバーティカルスライスを構築するための完全な仕様書。

一夜。一つのインシデント。一人のオペレーター。

---

## 戦略的ポジショニング

### このゲームとは

> **責任シミュレーター**

ミステリーゲームではない。パズルゲームではない。ビジュアルノベルではない。

プレイヤーは何も解決しない。
プレイヤーは何かを**背負う**。

### 市場差別化

| 競合パターン | 我々のアプローチ |
|--------------|------------------|
| 「犯人を見つけろ」 | 「誰を信じる？」 |
| 「パズルを解け」 | 「何と言う？」 |
| 「グッド/バッドエンド」 | 「クリーン/ダーティな結末」 |
| 「正解がある」 | 「追跡可能な結果」 |

---

## スコープ定義

### スコープ内（バーティカルスライス）

- [ ] 8つの電話（5人の発信者 + 3つのコールバック）
- [ ] シルエット + テキスト表現（フェーズ1）
- [ ] 応答選択UI
- [ ] フラグシステム（不可視の追跡）
- [ ] エンドステート計算
- [ ] 6つのエンディングバリエーション
- [ ] ゲームクロック（02:17 - 03:25）
- [ ] 基本的なメモ取りインターフェース

### スコープ外（将来）

- ボイス演技（フェーズ2）
- ビデオ通話（フェーズ3）
- 複数の夜
- セーブ/ロードシステム
- 設定メニュー
- 実績
- 日英以外のローカライズ

---

## 技術要件

### 最小限必要なシステム

#### 1. 通話マネージャー
```
- 着信通話のキュー管理
- 通話状態の処理（着信中、通話中、終了）
- 通話履歴の追跡
- 時間ベースの通話トリガー
```

#### 2. ダイアログシステム
```
- データから通話スクリプトを読み込み
- 発信者のシルエット + 名前を表示
- ダイアログセグメントを表示
- 応答オプションを提示
- 沈黙を応答として処理
- セグメント進行を追跡
```

#### 3. フラグシステム
```
- 応答選択時にフラグを設定
- 集計スコアを計算
- 夜を通じてフラグを永続化
- エンディング計算用にエクスポート
```

#### 4. クロックシステム
```
- ゲーム内時間の進行
- 実時間からゲーム時間への変換
- 通話トリガーのスケジューリング
- 時刻表示UI
```

#### 5. エンディングシステム
```
- フラグからエンドステートを計算
- 被害者の生存を判定
- 適切なエンディングを選択
- エンディングテキストを表示
```

---

## アセット要件

### UIアセット

| アセット | 説明 | 優先度 |
|----------|------|--------|
| オペレーターコンソール背景 | メインゲーム画面 | P0 |
| 着信パネル | 着信通知 | P0 |
| 通話中パネル | 通話中インターフェース | P0 |
| 応答ボタン | 3-4オプションレイアウト | P0 |
| 時計表示 | ゲーム時刻HUD | P0 |
| メモパネル | 基本的なテキストログ | P1 |

### キャラクターシルエット

| キャラクター | スタイル | 優先度 |
|--------------|----------|--------|
| 鈴木（退職者） | 男性、年配 | P0 |
| 中村（主任） | 男性、30代半ば | P0 |
| 田中（警備員） | 男性、60代 | P0 |
| 山田（ドライバー） | 女性、20代後半 | P0 |
| 家族（兄弟） | 中性的 | P0 |
| 主任（当直） | 男性、プロフェッショナル | P0 |

### オーディオ（フェーズ1 - 最小限）

| アセット | 説明 | 優先度 |
|----------|------|--------|
| 電話の着信音 | 着信SFX | P0 |
| 通話接続 | 応答SFX | P1 |
| 通話終了 | 切断SFX | P1 |
| アンビエント | 夜のオフィス雰囲気 | P2 |
| 時計の音 | 時間経過（オプション） | P2 |

---

## データ構造

### 通話データ（通話ごと）

```json
{
  "callId": "call_hit",
  "callerId": "yamada",
  "title": "何か轢いたかもしれない",
  "triggerTime": 169,
  "segments": [
    {
      "segmentId": "opening",
      "dialogue": {
        "ja": "...あの..."
      },
      "responses": [
        {
          "responseId": "probe",
          "displayText": { "ja": "どうされましたか？" },
          "nextSegment": "confession_path",
          "flags": { "set": ["probed_gently"] }
        }
      ]
    }
  ]
}
```

### フラグデータ（ランタイム）

```json
{
  "nightId": "night_01",
  "boolFlags": {
    "yamada_protected": false,
    "emergency_dispatched": true
  },
  "intFlags": {
    "reassurance_count": 2,
    "disclosure_count": 3
  },
  "aggregates": {
    "reassurance_score": 3,
    "escalation_score": 5,
    "system_trust": 1
  }
}
```

---

## ユーザーフロー

### メインループ

```
[夜の開始]
     ↓
[クロック稼働] ←——————————————————┐
     ↓                              │
[通話トリガー] → [着信UI]          │
     ↓                              │
[応答/無視]                         │
     ↓                              │
[ダイアログループ] → [応答選択]    │
     ↓                              │
[フラグ設定]                        │
     ↓                              │
[通話終了] ————————————————————————┘
     ↓
[時間制限到達]
     ↓
[エンドステート計算]
     ↓
[エンディング表示]
     ↓
[夜の終了]
```

### 通話フロー

```
[着信中]
     ↓
[プレイヤーが応答]
     ↓
[発信者シルエット + 名前]
     ↓
[ダイアログセグメント再生]
     ↓
[応答オプション表示]
     ↓
[プレイヤーが選択 / 待機]
     ↓
[フラグ評価]
     ↓
[次のセグメントまたは通話終了]
```

---

## マイルストーン内訳

### マイルストーン1: コアループ（第1-2週）
- [ ] 通話マネージャー（キュー、トリガー、状態）
- [ ] 基本的なダイアログ表示
- [ ] 応答選択
- [ ] クロックシステム
- [ ] プレースホルダーUI

### マイルストーン2: コンテンツ統合（第3-4週）
- [ ] 全8通話を実装
- [ ] 分岐ロジック動作
- [ ] フラグシステム稼働
- [ ] シルエットアセット統合
- [ ] UIポリッシュパス

### マイルストーン3: エンディング＆ポリッシュ（第5-6週）
- [ ] エンドステート計算
- [ ] 全6エンディングがプレイ可能
- [ ] オーディオ統合
- [ ] バグ修正
- [ ] プレイテストパス

### マイルストーン4: ピッチ対応（第7週）
- [ ] ビルド安定
- [ ] 20分のプレイスルー確認済み
- [ ] 配信対応（クラッシュなし）
- [ ] ピッチ用映像キャプチャ

---

## 成功基準

### プレイテスト指標

| 指標 | 目標 |
|------|------|
| 完了率 | >80% |
| 平均プレイ時間 | 15-25分 |
| 「リプレイしたい」 | >60% |
| 感情的インパクト報告 | >70% |

### ピッチ要件

- [ ] 標準PCでプレイ可能
- [ ] 外部依存関係なし
- [ ] 単一実行ファイルまたはWebビルド
- [ ] 20分のデモ長
- [ ] 明確な開始/終了状態

### 配信適性

- [ ] 10秒以上の無音なし
- [ ] 720pで読みやすいUI
- [ ] 決断の瞬間が見える
- [ ] 感情的ビートが伝わる

---

## リスク評価

| リスク | 可能性 | 軽減策 |
|--------|--------|--------|
| ダイアログのスコープクリープ | 高 | コンテンツ凍結、新規通話なし |
| フラグロジックのバグ | 中 | フラグ計算のユニットテスト |
| ペーシングが遅すぎる | 中 | 早期プレイテスト、タイミング調整 |
| UIが不明確 | 中 | 最小限のデザイン、明確なアフォーダンス |
| エンディングが同じに感じる | 低 | 5つの異なるエンドステートを設計済み |

---

## 完了の定義

バーティカルスライスは以下の条件を満たしたとき完成:

1. ✅ 全8通話が最初から最後までプレイ可能
2. ✅ すべての応答分岐が正しく機能
3. ✅ フラグシステムが定義されたすべてのフラグを追跡
4. ✅ エンドステートが正しく計算される
5. ✅ 状態に基づいて正しいエンディングが表示される
6. ✅ ゲームクロックが正確に動作
7. ✅ 通常プレイ中にクラッシュなし
8. ✅ 1回の完全なプレイスルーを記録済み

---

## スライス後の計画

バーティカルスライス承認後:

1. **ボイスキャスティング** — 6人の俳優が必要
2. **サウンドデザイン** — アンビエント、UI、感情的キュー
3. **第2夜デザイン** — 新しいインシデント、継続キャラクター
4. **セーブシステム** — 夜をまたぐ永続化
5. **プラットフォームターゲット** — PC、Switch、モバイルの実現可能性

---

## 付録: ファイル参照

| ドキュメント | 場所 |
|--------------|------|
| シナリオデザイン | `Docs/Scenarios/Night01_Footbridge.md` |
| フラグシステム | `Docs/Systems/FlagSystem.md` |
| エンドステート | `Docs/Systems/EndStates.md` |
| データ構造 | `Life/Assets/Scripts/Data/` |
| サービス | `Life/Assets/Scripts/Services/` |

---

## バージョン履歴

| バージョン | 日付 | 変更内容 |
|------------|------|----------|
| 1.0 | 2026-01-07 | 初期バーティカルスライス仕様書 |
| 1.1 | 2026-01-07 | 日本語翻訳 |
